"use strict";(self["webpackChunkweb_stonelink"]=self["webpackChunkweb_stonelink"]||[]).push([[48],{9478:function(e,a,t){t.d(a,{B:function(){return l},a:function(){return s}});var r=t(5793),n=t(3470);function s(e={}){const{page:a=1,page_size:t=20,lang:s="zh"}=e,l=`${r.JR}/news`;return(0,n.A)({url:l,method:"get",params:{page:a,page_size:t,lang:s},timeout:15e3}).then(e=>{const a=e.data;if(200!==a.code)throw new Error(a.message||"获取快讯失败");const t=a.data||{};return{items:t.items||[],total:t.total??0,page:t.page??1,page_size:t.page_size??20}}).catch(e=>{if(e.response)throw new Error(e.response.data?.message||"获取快讯失败");if(e.request)throw new Error("网络错误，请检查后端服务是否启动");throw e})}function l(e,a={}){const{lang:t="zh"}=a,s=`${r.JR}/news/${e}`;return(0,n.A)({url:s,method:"get",params:{lang:t},timeout:15e3}).then(e=>{const a=e.data;if(200!==a.code)throw new Error(a.message||"获取快讯详情失败");return a.data||{}}).catch(e=>{if(e.response)throw new Error(e.response.data?.message||"获取快讯详情失败");if(e.request)throw new Error("网络错误，请检查后端服务是否启动");throw e})}},7048:function(e,a,t){t.r(a),t.d(a,{default:function(){return C}});t(3842);var r=t(587),n=t(2651),s=t(8674),l=t(9844),u=t(9931),o=t(9478);const i={class:"news-detail-page"},c={class:"back-wrap top"},d={class:"detail-header"},v={class:"source"},p={class:"time"},g={class:"detail-title"},h={key:0,class:"detail-summary"},f={key:1,class:"detail-content"},k=["href"],m={key:1,class:"error-wrap"},w={class:"error-text"},_={key:2,class:"empty"};var y={__name:"NewsDetail",setup(e){const a=(0,u.lq)(),t=(0,u.rd)(),y=(0,n.KR)(null),b=(0,n.KR)(!1),E=(0,n.KR)(null),C=(0,r.EW)(()=>a.params.id);function L(e){if(!e)return"--";try{const a=new Date(e);if(Number.isNaN(a.getTime()))return e;const t=a.getFullYear(),r=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=String(a.getHours()).padStart(2,"0"),l=String(a.getMinutes()).padStart(2,"0");return`${t}-${r}-${n} ${s}:${l}`}catch{return e}}async function S(){if(C.value){b.value=!0,E.value=null,y.value=null;try{y.value=await(0,o.B)(C.value,{lang:"zh"})}catch(e){E.value=e.message||"加载失败"}finally{b.value=!1}}}function X(){t.push({name:"News"})}return(0,r.wB)(C,()=>S(),{immediate:!1}),(0,r.sV)(()=>S()),(e,a)=>{const t=(0,r.g2)("el-icon"),u=(0,r.g2)("el-button"),o=(0,r.g2)("el-card"),C=(0,r.gN)("loading");return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.Lk)("div",c,[(0,r.Lk)("span",{class:"back-link",onClick:X},[(0,r.bF)(t,null,{default:(0,r.k6)(()=>[(0,r.bF)((0,n.R1)(l.ArrowLeft))]),_:1}),a[0]||(a[0]=(0,r.Lk)("span",null,"返回快讯列表",-1))])]),(0,r.bo)(((0,r.uX)(),(0,r.Wv)(o,{class:"detail-card",shadow:"hover"},{default:(0,r.k6)(()=>[y.value?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.Lk)("div",d,[(0,r.Lk)("span",v,(0,s.v_)(y.value.source_name||"快讯"),1),(0,r.Lk)("span",p,(0,s.v_)(L(y.value.published_at||y.value.created_at)),1)]),(0,r.Lk)("h1",g,(0,s.v_)(y.value.title),1),y.value.summary?((0,r.uX)(),(0,r.CE)("p",h,(0,s.v_)(y.value.summary),1)):(0,r.Q3)("",!0),y.value.content?((0,r.uX)(),(0,r.CE)("div",f,(0,s.v_)(y.value.content),1)):(0,r.Q3)("",!0),y.value.url?((0,r.uX)(),(0,r.CE)("a",{key:2,href:y.value.url,target:"_blank",rel:"noopener noreferrer",class:"detail-link"}," 阅读原文 ",8,k)):(0,r.Q3)("",!0)],64)):!b.value&&E.value?((0,r.uX)(),(0,r.CE)("div",m,[(0,r.Lk)("p",w,(0,s.v_)(E.value),1),(0,r.bF)(u,{type:"primary",onClick:S},{default:(0,r.k6)(()=>[...a[1]||(a[1]=[(0,r.eW)(" 重试 ",-1)])]),_:1})])):b.value?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",_," 暂无内容 "))]),_:1})),[[C,b.value]])])}}},b=t(9190);const E=(0,b.A)(y,[["__scopeId","data-v-3c7341dd"]]);var C=E}}]);