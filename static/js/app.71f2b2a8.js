(function(){"use strict";var e={5793:function(e,t,s){s.d(t,{Co:function(){return r},JR:function(){return a},fn:function(){return o}});s(4715),s(7902),s(9857);const n="https://hub.stonelink.io/api/v1",a=n.replace(/\/$/,""),r=(()=>{const e="wss://hub.stonelink.io/ws";if(e&&(e.startsWith("ws://")||e.startsWith("wss://")))return e.replace(/\/$/,"");try{const e=new URL(n),t="https:"===e.protocol?"wss:":"ws:";return`${t}//${e.host}/api/v1/ws`}catch{return"ws://localhost:8000/ws"}})(),o=`${r.replace(/\/$/,"")}/klines`},415:function(e,t,s){s.d(t,{Am:function(){return r},Ny:function(){return p},Rb:function(){return o},dE:function(){return l},j:function(){return h},jE:function(){return d},uv:function(){return n}});s(6175),s(6068);const n="wss://mm-admin-new.test1.wcsbapp.com/ws/websocket",a={spot:[{id:"toobitSpot",name:"Toobit",color:"#00D4AA"},{id:"bnSpot",name:"Binance",color:"#F0B90B"},{id:"okexSpot",name:"OKX",color:"#000000"},{id:"gateSpot",name:"Gate.io",color:"#17E6A1"},{id:"mexcSpot",name:"MEXC",color:"#2CA6E0"},{id:"bitgetSpot",name:"Bitget",color:"#00F0FF"},{id:"bybitSpot",name:"Bybit",color:"#F7A600"}],futures:[{id:"toobitUM",name:"Toobit",color:"#00D4AA"},{id:"bnUM",name:"Binance",color:"#F0B90B"},{id:"okexUM",name:"OKX",color:"#000000"},{id:"gateUM",name:"Gate.io",color:"#17E6A1"},{id:"mexcUM",name:"MEXC",color:"#2CA6E0"},{id:"bitgetUM",name:"Bitget",color:"#00F0FF"},{id:"bybitUM",name:"Bybit",color:"#F7A600"}]},r=["BTCUSDT","ETHUSDT","SOLUSDT","BNBUSDT","XRPUSDT","DOGEUSDT","ADAUSDT"],o=[{label:"万1(0.01%)",value:1e-4},{label:"万5(0.05%)",value:5e-4},{label:"微观(0.1%)",value:.001},{label:"紧密(0.5%)",value:.005},{label:"核心(1%)",value:.01},{label:"巨额(2%)",value:.02},{label:"大额(5%)",value:.05},{label:"极限(10%)",value:.1}];function i(e){return e.endsWith("UM")}function c(e){if(e.includes("-SWAP-"))return e;const t=["USDT","USDC","BUSD"];for(const s of t)if(e.endsWith(s)){const t=e.slice(0,-s.length);return`${t}-SWAP-${s}`}return`${e.replace("USDT","")}-SWAP-USDT`}function l(e){if(!e)return e;const t=e.match(/^([A-Z0-9-]+)-SWAP-([A-Z]+)$/);return t?`${t[1]}${t[2]}`:e}function d(e,t){const s=i(e)?c(t):t;return`depth_${e}_${s}`}function h(e){const t=e.match(/^depth_([^_]+)_(.+)$/);if(t){const e=t[1],s=t[2],n=l(s);return{exchange:e,symbol:s,standardSymbol:n}}return null}function u(e,t="futures"){const s=a[t]||[];return s.find(t=>t.id===e)||null}function p(e,t="futures"){const s=u(e,t);return s?s.name:e}},7420:function(e,t,s){var n=s(9844),a=s(7776),r=s(587);const o={id:"app"};function i(e,t,s,n,a,i){const c=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.bF)(c)])}var c={name:"App"},l=s(9190);const d=(0,l.A)(c,[["render",i]]);var h=d,u=s(6239),p=(s(4825),s(5745),{install(e){e.use(u.A)}}),k=s(9931),m=(s(3842),s(6175),s(6068),s(8674)),v=s(2651),f=s(2380);(0,f.nY)("app",{state:()=>({theme:localStorage.getItem("theme")||"dark",language:localStorage.getItem("language")||"zh-CN",loading:!1,sidebarCollapsed:!1,systemInfo:{version:"1.0.0",buildTime:(new Date).toISOString()}}),getters:{isDarkTheme:e=>"dark"===e.theme,isLightTheme:e=>"light"===e.theme},actions:{toggleTheme(){this.theme="light"===this.theme?"dark":"light",localStorage.setItem("theme",this.theme),document.documentElement.setAttribute("data-theme",this.theme)},setTheme(e){this.theme=e,localStorage.setItem("theme",e),document.documentElement.setAttribute("data-theme",e)},toggleSidebar(){this.sidebarCollapsed=!this.sidebarCollapsed},setSidebarCollapsed(e){this.sidebarCollapsed=e},setLanguage(e){this.language=e,localStorage.setItem("language",e)},setLoading(e){this.loading=e},initApp(){document.documentElement.setAttribute("data-theme",this.theme),document.documentElement.setAttribute("lang",this.language)}}});var b=s(5850),g=(s(1569),s(6329));const y=(0,f.Ey)();var w=y;const S={class:"layout-container"},L={class:"fintech-header"},T={class:"header-inner"},x={class:"header-right"},_={class:"nav-links"},E={class:"exchange-type-switch"},M={class:"exchange-type-trigger"},C={class:"type-label"},A={class:"indicator-text"},D={class:"main-content"},W={class:"fintech-footer"},B={class:"footer-inner"},j={class:"footer-copyright"},F={name:"SimpleLayout"};var U=Object.assign(F,{setup(e){const t=(0,k.lq)(),s=(0,b.w)(),a=(0,g.V)(),o=(0,r.EW)(()=>(new Date).getFullYear()),i=(0,r.EW)(()=>t.path.startsWith("/news")||"News"===t.name||"NewsDetail"===t.name),c=(0,r.EW)({get:()=>s.config.exchangeType,set:e=>s.switchExchangeType(e)});function l(e){s.switchExchangeType(e),window.location.reload()}const d=(0,r.EW)(()=>{const e={connected:"已连接",connecting:"连接中",disconnected:"未连接",error:"错误"};return e[s.connectionStatus]||"未知"}),h=(0,r.EW)(()=>"connected"===s.connectionStatus?"connected":"disconnected");async function u(){try{await s.connect()}catch(e){console.error("SimpleLayout: WebSocket 连接失败:",e)}}function p(e){const t=e.find(e=>e.includes("BTC")),s=e.find(e=>e.includes("ETH")),n=[];return t&&n.push(t),s&&n.push(s),n.length>=2?n.slice(0,2):e.slice(0,2)}async function f(){const e="futures"===s.config.exchangeType?"contract":"spot";a.setCurrentType(e),a.setCurrentExchange("toobit");try{await a.fetchSymbols({exchange:"toobit",type:e,forceRefresh:!0}),a.symbolList.length>0&&s.updateSymbols(p(a.symbolList))}catch(t){console.error("SimpleLayout: 初始化交易对列表失败:",t)}}return(0,r.sV)(async()=>{document.documentElement.classList.add("dark"),await f(),await u()}),(0,r.wB)(()=>s.config.exchangeType,async()=>{const e="futures"===s.config.exchangeType?"contract":"spot";a.setCurrentType(e);try{await a.fetchSymbols({exchange:"toobit",type:e,forceRefresh:!0}),a.symbolList.length>0&&s.updateSymbols(p(a.symbolList))}catch(t){console.error("SimpleLayout: 更新交易对列表失败:",t)}}),(0,r.wB)(()=>a.symbolList,e=>{e.length>0&&s.isConnected&&s.updateSymbols(p(e))}),(e,t)=>{const s=(0,r.g2)("router-link"),a=(0,r.g2)("el-icon"),u=(0,r.g2)("el-dropdown-item"),p=(0,r.g2)("el-dropdown-menu"),k=(0,r.g2)("el-dropdown"),f=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",S,[(0,r.Lk)("header",L,[(0,r.Lk)("div",T,[(0,r.bF)(s,{to:"/",class:"logo-link"},{default:(0,r.k6)(()=>[...t[0]||(t[0]=[(0,r.Lk)("div",{class:"logo-icon"},[(0,r.Lk)("svg",{viewBox:"0 0 24 24",fill:"none"},[(0,r.Lk)("path",{d:"M12 2L2 7l10 5 10-5-10-5z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),(0,r.Lk)("path",{d:"M2 17l10 5 10-5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),(0,r.Lk)("path",{d:"M2 12l10 5 10-5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),(0,r.Lk)("span",{class:"logo-text"},"StoneLink",-1)])]),_:1}),(0,r.Lk)("div",x,[(0,r.Lk)("nav",_,[(0,r.bF)(s,{to:"/",class:"nav-link","exact-active-class":"nav-link-active"},{default:(0,r.k6)(()=>[...t[1]||(t[1]=[(0,r.Lk)("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),(0,r.Lk)("span",null,"首页",-1)])]),_:1}),(0,r.bF)(s,{to:"/multi-depth",class:"nav-link","active-class":"nav-link-active"},{default:(0,r.k6)(()=>[...t[2]||(t[2]=[(0,r.Lk)("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),(0,r.Lk)("span",null,"多交易所深度",-1)])]),_:1}),(0,r.bF)(s,{to:"/symbol/BTCUSDT",class:"nav-link","active-class":"nav-link-active"},{default:(0,r.k6)(()=>[...t[3]||(t[3]=[(0,r.Lk)("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),(0,r.Lk)("span",null,"单币对详情",-1)])]),_:1}),(0,r.bF)(s,{to:"/orderbook",class:"nav-link","active-class":"nav-link-active"},{default:(0,r.k6)(()=>[...t[4]||(t[4]=[(0,r.Lk)("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1),(0,r.Lk)("span",null,"订单簿",-1)])]),_:1}),(0,r.bF)(s,{to:"/market",class:"nav-link","active-class":"nav-link-active"},{default:(0,r.k6)(()=>[...t[5]||(t[5]=[(0,r.Lk)("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M13 7h8m0 0v8m0-8v8M3 21h18M3 10h18M3 7l9-4 9 4M3 21V7M21 21V7l-9 4"})],-1),(0,r.Lk)("span",null,"市场",-1)])]),_:1}),(0,r.bF)(s,{to:"/kline",class:"nav-link","active-class":"nav-link-active"},{default:(0,r.k6)(()=>[...t[6]||(t[6]=[(0,r.Lk)("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})],-1),(0,r.Lk)("span",null,"K 线",-1)])]),_:1}),(0,r.bF)(s,{to:"/funding-rates",class:"nav-link","active-class":"nav-link-active"},{default:(0,r.k6)(()=>[...t[7]||(t[7]=[(0,r.Lk)("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),(0,r.Lk)("span",null,"资金费率",-1)])]),_:1}),(0,r.bF)(s,{to:"/news",class:(0,m.C4)(["nav-link",{"nav-link-active":i.value}])},{default:(0,r.k6)(()=>[...t[8]||(t[8]=[(0,r.Lk)("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})],-1),(0,r.Lk)("span",null,"快讯",-1)])]),_:1},8,["class"])]),(0,r.Lk)("div",E,[(0,r.bF)(k,{trigger:"click",onCommand:l},{dropdown:(0,r.k6)(()=>[(0,r.bF)(p,null,{default:(0,r.k6)(()=>[(0,r.bF)(u,{command:"futures",class:(0,m.C4)({active:"futures"===c.value})},{default:(0,r.k6)(()=>[...t[9]||(t[9]=[(0,r.eW)(" 合约 ",-1)])]),_:1},8,["class"]),(0,r.bF)(u,{command:"spot",class:(0,m.C4)({active:"spot"===c.value})},{default:(0,r.k6)(()=>[...t[10]||(t[10]=[(0,r.eW)(" 现货 ",-1)])]),_:1},8,["class"])]),_:1})]),default:(0,r.k6)(()=>[(0,r.Lk)("span",M,[(0,r.Lk)("span",C,(0,m.v_)("futures"===c.value?"合约":"现货"),1),(0,r.bF)(a,{class:"el-icon--right"},{default:(0,r.k6)(()=>[(0,r.bF)((0,v.R1)(n.ArrowDown))]),_:1})])]),_:1})]),(0,r.Lk)("div",{class:(0,m.C4)(["connection-indicator",h.value])},[t[11]||(t[11]=(0,r.Lk)("span",{class:"indicator-dot"},null,-1)),(0,r.Lk)("span",A,(0,m.v_)(d.value),1)],2)])])]),(0,r.Lk)("main",D,[(0,r.bF)(f,null,{default:(0,r.k6)(({Component:e})=>[((0,r.uX)(),(0,r.Wv)(r.PR,{include:["News"]},[((0,r.uX)(),(0,r.Wv)((0,r.$y)(e)))],1024))]),_:1})]),(0,r.Lk)("footer",W,[(0,r.Lk)("div",B,[t[12]||(t[12]=(0,r.Fv)('<div class="footer-brand" data-v-2fa97cc4><div class="footer-logo" data-v-2fa97cc4><svg viewBox="0 0 24 24" fill="none" data-v-2fa97cc4><path d="M12 2L2 7l10 5 10-5-10-5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-2fa97cc4></path><path d="M2 17l10 5 10-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-2fa97cc4></path><path d="M2 12l10 5 10-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-2fa97cc4></path></svg></div><span class="footer-name" data-v-2fa97cc4>StoneLink</span></div><div class="footer-divider" data-v-2fa97cc4></div>',2)),(0,r.Lk)("div",j," © "+(0,m.v_)(o.value)+" StoneLink. All rights reserved. ",1),t[13]||(t[13]=(0,r.Fv)('<div class="footer-links" data-v-2fa97cc4><a href="#" class="footer-link" data-v-2fa97cc4>关于我们</a><span class="footer-link-divider" data-v-2fa97cc4>·</span><a href="#" class="footer-link" data-v-2fa97cc4>使用条款</a><span class="footer-link-divider" data-v-2fa97cc4>·</span><a href="#" class="footer-link" data-v-2fa97cc4>隐私政策</a></div>',1))])])])}}});const O=(0,l.A)(U,[["__scopeId","data-v-2fa97cc4"]]);var $=O;const N={class:"fintech-home"},R={class:"hero-section"},P={class:"hero-content"},H={class:"hero-actions"},I={class:"hero-visual"},z={class:"data-card main-card"},V={class:"price-display"},K={class:"price-row"},q={class:"price-row"},J={class:"data-card stats-card"},X={class:"stat-item"},Y={class:"stat-value"},G={class:"stat-item"},Z={class:"stat-value"},Q={class:"stat-item"},ee={class:"features-section"},te={class:"features-grid"},se={class:"cta-section"},ne={class:"cta-content"};var ae={__name:"index",setup(e){const t=(0,b.w)(),s=(0,v.KR)(0),n=(0,v.KR)(0),a=(0,v.KR)(0),o=(0,v.KR)(0),i=(0,r.EW)(()=>{const e={connected:"已连接",connecting:"连接中",disconnected:"未连接",error:"错误"};return e[t.connectionStatus]||"未知"}),c=(0,r.EW)(()=>"connected"===t.connectionStatus?"connected":"disconnected"),l=(0,r.EW)(()=>t.isConnected?2:0),d=(0,r.EW)(()=>t.symbols?.length||2),h=(0,r.EW)(()=>s.value>a.value?"price-up":s.value<a.value?"price-down":""),u=(0,r.EW)(()=>n.value>o.value?"price-up":n.value<o.value?"price-down":""),p=e=>e&&0!==e?e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"----.--",k=()=>{const e=t.getDepthData("BTCUSDT",t.compareExchanges[0]),r=t.getDepthData("ETHUSDT",t.compareExchanges[0]);e?.bestBid&&(a.value=s.value,s.value=e.bestBid),r?.bestBid&&(o.value=n.value,n.value=r.bestBid)};let f=null;return(0,r.sV)(()=>{t.isConnected||t.connect(),f=setInterval(k,500)}),(0,r.hi)(()=>{f&&clearInterval(f)}),(e,t)=>{const a=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",N,[t[21]||(t[21]=(0,r.Fv)('<div class="animated-bg" data-v-fe7acd98><div class="grid-lines" data-v-fe7acd98></div><div class="glow-orb orb-1" data-v-fe7acd98></div><div class="glow-orb orb-2" data-v-fe7acd98></div><div class="glow-orb orb-3" data-v-fe7acd98></div></div>',1)),(0,r.Lk)("section",R,[(0,r.Lk)("div",P,[t[3]||(t[3]=(0,r.Fv)('<div class="hero-badge" data-v-fe7acd98><span class="pulse-dot" data-v-fe7acd98></span><span data-v-fe7acd98>实时数据监控</span></div><h1 class="hero-title" data-v-fe7acd98><span class="gradient-text" data-v-fe7acd98>StoneLink</span><br data-v-fe7acd98><span class="sub-title" data-v-fe7acd98>多交易所深度分析平台</span></h1><p class="hero-desc" data-v-fe7acd98> 专业级深度数据聚合 · 实时 K 线 · 滑点模拟 · 订单簿监控 · 市场快讯 </p>',3)),(0,r.Lk)("div",H,[(0,r.bF)(a,{to:"/multi-depth",class:"btn-primary"},{default:(0,r.k6)(()=>[...t[0]||(t[0]=[(0,r.Lk)("span",{class:"btn-glow"},null,-1),(0,r.Lk)("span",{class:"btn-text"},"深度对比",-1),(0,r.Lk)("svg",{class:"btn-arrow",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1)])]),_:1}),(0,r.bF)(a,{to:"/kline",class:"btn-secondary"},{default:(0,r.k6)(()=>[...t[1]||(t[1]=[(0,r.eW)(" K 线图表 ",-1)])]),_:1}),(0,r.bF)(a,{to:"/orderbook",class:"btn-secondary"},{default:(0,r.k6)(()=>[...t[2]||(t[2]=[(0,r.eW)(" 订单簿 ",-1)])]),_:1})])]),(0,r.Lk)("div",I,[(0,r.Lk)("div",z,[t[6]||(t[6]=(0,r.Fv)('<div class="card-header" data-v-fe7acd98><div class="card-icon" data-v-fe7acd98><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" data-v-fe7acd98><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" data-v-fe7acd98></path></svg></div><span class="card-label" data-v-fe7acd98>实时行情</span><span class="live-indicator" data-v-fe7acd98><span class="live-dot" data-v-fe7acd98></span> LIVE </span></div>',1)),(0,r.Lk)("div",V,[(0,r.Lk)("div",K,[t[4]||(t[4]=(0,r.Lk)("span",{class:"symbol"},"BTC/USDT",-1)),(0,r.Lk)("span",{class:(0,m.C4)(["price",h.value])},(0,m.v_)(p(s.value)),3)]),(0,r.Lk)("div",q,[t[5]||(t[5]=(0,r.Lk)("span",{class:"symbol"},"ETH/USDT",-1)),(0,r.Lk)("span",{class:(0,m.C4)(["price",u.value])},(0,m.v_)(p(n.value)),3)])])]),(0,r.Lk)("div",J,[(0,r.Lk)("div",X,[t[7]||(t[7]=(0,r.Lk)("span",{class:"stat-label"},"已连接交易所",-1)),(0,r.Lk)("span",Y,(0,m.v_)(l.value),1)]),(0,r.Lk)("div",G,[t[8]||(t[8]=(0,r.Lk)("span",{class:"stat-label"},"监控币对",-1)),(0,r.Lk)("span",Z,(0,m.v_)(d.value),1)]),(0,r.Lk)("div",Q,[t[9]||(t[9]=(0,r.Lk)("span",{class:"stat-label"},"连接状态",-1)),(0,r.Lk)("span",{class:(0,m.C4)(["stat-value status",c.value])},(0,m.v_)(i.value),3)])])])]),(0,r.Lk)("section",ee,[t[17]||(t[17]=(0,r.Lk)("h2",{class:"section-title"},[(0,r.Lk)("span",{class:"title-line"}),(0,r.Lk)("span",null,"核心功能"),(0,r.Lk)("span",{class:"title-line"})],-1)),(0,r.Lk)("div",te,[(0,r.bF)(a,{to:"/multi-depth",class:"feature-card"},{default:(0,r.k6)(()=>[...t[10]||(t[10]=[(0,r.Lk)("div",{class:"feature-icon depth-icon"},[(0,r.Lk)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1),(0,r.Lk)("h3",{class:"feature-title"},"多交易所深度对比",-1),(0,r.Lk)("p",{class:"feature-desc"},"实时对比 Binance、Toobit 等交易所深度数据，快速发现套利机会",-1),(0,r.Lk)("div",{class:"feature-tags"},[(0,r.Lk)("span",{class:"tag"},"实时数据"),(0,r.Lk)("span",{class:"tag"},"多维分析")],-1),(0,r.Lk)("div",{class:"feature-arrow"},[(0,r.Lk)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})])],-1)])]),_:1}),(0,r.bF)(a,{to:"/symbol/BTCUSDT",class:"feature-card"},{default:(0,r.k6)(()=>[...t[11]||(t[11]=[(0,r.Lk)("div",{class:"feature-icon slippage-icon"},[(0,r.Lk)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})])],-1),(0,r.Lk)("h3",{class:"feature-title"},"滑点模拟计算",-1),(0,r.Lk)("p",{class:"feature-desc"},"模拟大额交易滑点，精准计算成交均价与预期损耗",-1),(0,r.Lk)("div",{class:"feature-tags"},[(0,r.Lk)("span",{class:"tag"},"精准计算"),(0,r.Lk)("span",{class:"tag"},"风险评估")],-1),(0,r.Lk)("div",{class:"feature-arrow"},[(0,r.Lk)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})])],-1)])]),_:1}),(0,r.bF)(a,{to:"/symbol/ETHUSDT",class:"feature-card"},{default:(0,r.k6)(()=>[...t[12]||(t[12]=[(0,r.Lk)("div",{class:"feature-icon liquidity-icon"},[(0,r.Lk)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1),(0,r.Lk)("h3",{class:"feature-title"},"流动性深度分析",-1),(0,r.Lk)("p",{class:"feature-desc"},"多层级流动性分析，从万分之一到 10% 价差范围全覆盖",-1),(0,r.Lk)("div",{class:"feature-tags"},[(0,r.Lk)("span",{class:"tag"},"8档深度"),(0,r.Lk)("span",{class:"tag"},"全面分析")],-1),(0,r.Lk)("div",{class:"feature-arrow"},[(0,r.Lk)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})])],-1)])]),_:1}),(0,r.bF)(a,{to:"/orderbook",class:"feature-card"},{default:(0,r.k6)(()=>[...t[13]||(t[13]=[(0,r.Lk)("div",{class:"feature-icon orderbook-icon"},[(0,r.Lk)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})])],-1),(0,r.Lk)("h3",{class:"feature-title"},"实时订单簿",-1),(0,r.Lk)("p",{class:"feature-desc"},"可视化买卖深度图表、市场压力分析、大单追踪与实时订单簿监控",-1),(0,r.Lk)("div",{class:"feature-tags"},[(0,r.Lk)("span",{class:"tag"},"深度图表"),(0,r.Lk)("span",{class:"tag"},"大单追踪"),(0,r.Lk)("span",{class:"tag"},"压力分析")],-1),(0,r.Lk)("div",{class:"feature-arrow"},[(0,r.Lk)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})])],-1)])]),_:1}),(0,r.bF)(a,{to:"/kline",class:"feature-card"},{default:(0,r.k6)(()=>[...t[14]||(t[14]=[(0,r.Lk)("div",{class:"feature-icon kline-icon"},[(0,r.Lk)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})])],-1),(0,r.Lk)("h3",{class:"feature-title"},"K 线图表",-1),(0,r.Lk)("p",{class:"feature-desc"},"蜡烛/折线/面积多种图表类型，实时 WebSocket 推送，支持多周期切换",-1),(0,r.Lk)("div",{class:"feature-tags"},[(0,r.Lk)("span",{class:"tag"},"实时推送"),(0,r.Lk)("span",{class:"tag"},"多周期")],-1),(0,r.Lk)("div",{class:"feature-arrow"},[(0,r.Lk)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})])],-1)])]),_:1}),(0,r.bF)(a,{to:"/market",class:"feature-card"},{default:(0,r.k6)(()=>[...t[15]||(t[15]=[(0,r.Lk)("div",{class:"feature-icon market-icon"},[(0,r.Lk)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M13 7h8m0 0v8m0-8v8M3 21h18M3 10h18M3 7l9-4 9 4M3 21V7M21 21V7l-9 4"})])],-1),(0,r.Lk)("h3",{class:"feature-title"},"市场行情",-1),(0,r.Lk)("p",{class:"feature-desc"},"多交易所行情概览，涨跌幅排行与实时价格监控",-1),(0,r.Lk)("div",{class:"feature-tags"},[(0,r.Lk)("span",{class:"tag"},"行情概览"),(0,r.Lk)("span",{class:"tag"},"涨跌排行")],-1),(0,r.Lk)("div",{class:"feature-arrow"},[(0,r.Lk)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})])],-1)])]),_:1}),(0,r.bF)(a,{to:"/news",class:"feature-card"},{default:(0,r.k6)(()=>[...t[16]||(t[16]=[(0,r.Lk)("div",{class:"feature-icon news-icon"},[(0,r.Lk)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})])],-1),(0,r.Lk)("h3",{class:"feature-title"},"快讯",-1),(0,r.Lk)("p",{class:"feature-desc"},"行业资讯与市场动态，第一时间掌握重要信息",-1),(0,r.Lk)("div",{class:"feature-tags"},[(0,r.Lk)("span",{class:"tag"},"行业资讯"),(0,r.Lk)("span",{class:"tag"},"市场动态")],-1),(0,r.Lk)("div",{class:"feature-arrow"},[(0,r.Lk)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})])],-1)])]),_:1})])]),t[22]||(t[22]=(0,r.Fv)('<section class="metrics-section" data-v-fe7acd98><div class="metrics-grid" data-v-fe7acd98><div class="metric-card" data-v-fe7acd98><div class="metric-number" data-v-fe7acd98><span class="counter" data-v-fe7acd98>250</span><span class="unit" data-v-fe7acd98>+</span></div><div class="metric-label" data-v-fe7acd98>深度档位</div></div><div class="metric-card" data-v-fe7acd98><div class="metric-number" data-v-fe7acd98><span class="counter" data-v-fe7acd98>&lt;50</span><span class="unit" data-v-fe7acd98>ms</span></div><div class="metric-label" data-v-fe7acd98>数据延迟</div></div><div class="metric-card" data-v-fe7acd98><div class="metric-number" data-v-fe7acd98><span class="counter" data-v-fe7acd98>8</span><span class="unit" data-v-fe7acd98>级</span></div><div class="metric-label" data-v-fe7acd98>深度范围</div></div><div class="metric-card" data-v-fe7acd98><div class="metric-number" data-v-fe7acd98><span class="counter" data-v-fe7acd98>24/7</span></div><div class="metric-label" data-v-fe7acd98>全天候监控</div></div></div></section>',1)),(0,r.Lk)("section",se,[(0,r.Lk)("div",ne,[t[19]||(t[19]=(0,r.Lk)("h2",{class:"cta-title"},"开始您的专业深度分析",-1)),t[20]||(t[20]=(0,r.Lk)("p",{class:"cta-desc"},"深度对比 · K 线图表 · 订单簿 · 市场快讯 · 实时数据",-1)),(0,r.bF)(a,{to:"/multi-depth",class:"cta-btn"},{default:(0,r.k6)(()=>[...t[18]||(t[18]=[(0,r.eW)(" 深度对比 ",-1),(0,r.Lk)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[(0,r.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1)])]),_:1})])])])}}};const re=(0,l.A)(ae,[["__scopeId","data-v-fe7acd98"]]);var oe=re;const ie=[{path:"/",component:$,children:[{path:"",name:"Home",component:oe,meta:{title:"首页"}},{path:"multi-depth",name:"MultiExchangeDepth",component:()=>s.e(522).then(s.bind(s,4522)),meta:{title:"多交易所深度对比"}},{path:"symbol/:symbol",name:"SymbolDetail",component:()=>s.e(791).then(s.bind(s,1791)),meta:{title:"单币种详情"}},{path:"orderbook",name:"OrderBook",component:()=>Promise.all([s.e(209),s.e(896)]).then(s.bind(s,6515)),meta:{title:"实时订单簿"}},{path:"market",name:"Market",component:()=>Promise.all([s.e(209),s.e(909)]).then(s.bind(s,909)),meta:{title:"市场行情"}},{path:"kline",name:"Kline",component:()=>s.e(987).then(s.bind(s,5987)),meta:{title:"K 线图表"}},{path:"funding-rates",name:"FundingRates",component:()=>s.e(977).then(s.bind(s,8977)),meta:{title:"资金费率"}},{path:"news",name:"News",component:()=>s.e(180).then(s.bind(s,1180)),meta:{title:"快讯"}},{path:"news/:id",name:"NewsDetail",component:()=>s.e(48).then(s.bind(s,7048)),meta:{title:"快讯详情"}}]},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>s.e(675).then(s.bind(s,56)),meta:{title:"404 - 页面未找到"}}],ce=(0,k.aE)({history:(0,k.Bt)(),routes:ie});var le=ce;window.addEventListener("error",e=>{if(e.message?.includes("ResizeObserver loop"))return e.stopImmediatePropagation(),e.preventDefault(),!0},!0);const de=(0,a.Ef)(h);for(const[he,ue]of Object.entries(n))de.component(he,ue);de.use(le).use(w).use(p).mount("#app")},3291:function(e,t,s){s.d(t,{O:function(){return r},X:function(){return o}});var n=s(5793),a=s(3470);function r(e={}){const{exchange:t="toobit",type:s="contract"}=e,r=`${n.JR}/symbols`,o={exchange:t,type:s};return(0,a.A)({url:r,method:"get",params:o,timeout:15e3}).then(e=>{const t=e.data;if(200!==t.code)throw new Error(t.message||"获取交易对列表失败");return t.data||[]}).catch(e=>{throw console.error("获取交易对失败:",e),e.response?new Error(e.response.data?.message||"获取交易对列表失败"):e.request?new Error("网络错误，请检查后端服务是否启动"):e})}function o(e={}){const{exchange:t="toobit",market_type:s="spot",page:r=1,page_size:o=10}=e,i=`${n.JR}/symbols/ccxt/contracts`;return(0,a.A)({url:i,method:"get",params:{exchange:t,market_type:s,page:r,page_size:o},timeout:15e3}).then(e=>{const s=e.data;if(200!==s.code)throw new Error(s.message||"获取交易对列表失败");const n=s.data||{},a=t||Object.keys(n)[0],r=n[a];return r?{items:r.items||[],total:r.total??0,page:r.page??1,page_size:r.page_size??10}:{items:[],total:0,page:1,page_size:10}}).catch(e=>{throw console.error("获取交易对列表失败:",e),e.response?new Error(e.response.data?.message||"获取交易对列表失败"):e.request?new Error("网络错误，请检查后端服务是否启动"):e})}},5850:function(e,t,s){s.d(t,{w:function(){return u}});s(6175),s(9865),s(1397),s(7622);var n=s(2380),a=s(415);s(3842),s(6740),s(1928),s(3754),s(3383),s(7133),s(5284),s(5595),s(4096),s(7858),s(4715),s(7902),s(9857);class r{constructor(){this.ws=null,this.status="disconnected",this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=3e3,this.heartbeatTimer=null,this.heartbeatInterval=3e4,this.reconnectTimer=null,this.subscriptions=new Set,this.worker=null,this.workerReady=!1,this.onDepthUpdate=null,this.onStatusChange=null,this.onError=null,this.initWorker()}initWorker(){try{this.worker=new Worker(new URL(s.p+s.u(956),s.b)),this.worker.onmessage=e=>{this.handleWorkerMessage(e.data)},this.worker.onerror=e=>{console.error("Worker 错误:",e),this.onError&&this.onError({type:"worker_error",error:e})}}catch(e){console.error("初始化 Worker 失败:",e),this.worker=null}}handleWorkerMessage(e){const{type:t,data:s}=e;switch(t){case"ready":this.workerReady=!0;break;case"depthUpdate":this.onDepthUpdate&&this.onDepthUpdate(s);break;case"error":console.error("Worker 处理错误:",s),this.onError&&this.onError({type:"process_error",...s});break;case"configUpdated":break;default:break}}sendToWorker(e,t){this.worker&&this.workerReady?this.worker.postMessage({type:e,data:t}):this.worker&&setTimeout(()=>this.sendToWorker(e,t),100)}updateWorkerConfig(e){this.sendToWorker("updateConfig",e)}connect(){if(!this.ws||this.ws.readyState!==WebSocket.OPEN){this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.updateStatus("connecting");try{this.ws=new WebSocket(a.uv),this.ws.onopen=()=>{this.reconnectAttempts=0,this.updateStatus("connected"),this.startHeartbeat(),this.resubscribeAll()},this.ws.onmessage=e=>{this.handleMessage(e.data)},this.ws.onclose=e=>{this.updateStatus("disconnected"),this.stopHeartbeat(),this.scheduleReconnect()},this.ws.onerror=e=>{console.error("WebSocket 错误:",e),this.updateStatus("error"),this.onError&&this.onError({type:"websocket_error",error:e})}}catch(e){console.error("创建 WebSocket 连接失败:",e),this.updateStatus("error")}}}handleMessage(e){const t=this.splitJsonMessages(e);for(const n of t)try{const e=JSON.parse(n);this.processMessage(e)}catch(s){console.error("解析消息失败:",s.message)}}splitJsonMessages(e){const t=[];let s=0,n=0,a=!1,r=!1;for(let o=0;o<e.length;o++){const i=e[o];r?r=!1:"\\"===i&&a?r=!0:'"'!==i?a||("{"===i?(0===s&&(n=o),s++):"}"===i&&(s--,0===s&&t.push(e.substring(n,o+1)))):a=!a}return 0===t.length&&e.trim()&&t.push(e),t}processMessage(e){if(e.topic&&e.topic.startsWith("depth_")&&e.payload){const t=(0,a.j)(e.topic);if(t&&e.payload.data){const s={exchange:e.payload.info?.exchange||t.exchange,symbol:t.standardSymbol,rawSymbol:t.symbol,bids:e.payload.data.bids||[],asks:e.payload.data.asks||[],tsExch:e.payload.data.tsExch,tsRecv:e.payload.data.tsRecv};this.sendToWorker("processDepth",s)}}"ping"===e.op&&this.send({op:"pong"}),"subscribe"===e.op&&e.code}subscribeDepth(e,t){const s=(0,a.jE)(e,t);this.subscriptions.has(s)||(this.subscriptions.add(s),this.ws&&this.ws.readyState===WebSocket.OPEN&&this.send({op:"subscribe",args:[s]}))}subscribeDepthBatch(e,t){const s=e.map(e=>(0,a.jE)(e,t)),n=s.filter(e=>!this.subscriptions.has(e));0!==n.length&&(n.forEach(e=>this.subscriptions.add(e)),this.ws&&this.ws.readyState===WebSocket.OPEN&&this.send({op:"subscribe",args:n}))}unsubscribeDepth(e,t){const s=(0,a.jE)(e,t);this.subscriptions.has(s)&&(this.subscriptions.delete(s),this.ws&&this.ws.readyState===WebSocket.OPEN&&this.send({op:"unsubscribe",args:[s]}),this.sendToWorker("clearCache",{exchange:e,symbol:t}))}unsubscribeAll(){0!==this.subscriptions.size&&(this.ws&&this.ws.readyState===WebSocket.OPEN&&this.send({op:"unsubscribe",args:Array.from(this.subscriptions)}),this.subscriptions.clear(),this.sendToWorker("clearCache",{}))}resubscribeAll(){this.subscriptions.size>0&&this.ws&&this.ws.readyState===WebSocket.OPEN&&this.send({op:"subscribe",args:Array.from(this.subscriptions)})}send(e){this.ws&&this.ws.readyState===WebSocket.OPEN?this.ws.send(JSON.stringify(e)):console.warn("WebSocket 未连接，无法发送消息")}updateStatus(e){this.status=e,this.onStatusChange&&this.onStatusChange(e)}startHeartbeat(){this.stopHeartbeat(),this.heartbeatTimer=setInterval(()=>{this.ws&&this.ws.readyState===WebSocket.OPEN&&this.send({op:"ping"})},this.heartbeatInterval)}stopHeartbeat(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null)}scheduleReconnect(){if(this.reconnectAttempts<this.maxReconnectAttempts){this.reconnectAttempts++;const e=this.reconnectDelay*this.reconnectAttempts;this.reconnectTimer=setTimeout(()=>this.connect(),e)}else console.error("达到最大重连次数"),this.updateStatus("failed")}disconnect(){this.stopHeartbeat(),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.subscriptions.clear(),this.sendToWorker("clearCache",{}),this.ws&&(this.ws.onclose=null,this.ws.close(),this.ws=null),this.updateStatus("disconnected")}destroy(){this.disconnect(),this.worker&&(this.worker.terminate(),this.worker=null)}getStatus(){return this.status}getSubscriptions(){return Array.from(this.subscriptions)}}let o=null;function i(){return o||(o=new r),o}const c=a.Am.slice(0,2),l={futures:["bnUM","toobitUM","okexUM","bybitUM"],spot:["bnSpot","toobitSpot","okexSpot","bybitSpot"]},d="stonelink_exchange_type",h=()=>{try{const e=localStorage.getItem(d);if("spot"===e||"futures"===e)return e}catch{}return"futures"},u=(0,n.nY)("depth",{state:()=>({connectionStatus:"disconnected",config:{exchangeType:h(),orderSide:"buy",depthLevels:250,depthPercentage:1e-4},symbols:c,depthData:{},isLoading:!1,wsService:null}),getters:{depthOptions:()=>a.Rb,compareExchanges:e=>l[e.config.exchangeType]||l.futures,getDepthData:e=>(t,s)=>{const n=(0,a.dE)(t),r=`${n}_${s}`;return e.depthData[r]||{asks:[],bids:[],bestBid:0,bestAsk:0,spread:0,spreadPercent:0,depthStats:{},lastUpdate:"--"}},depthComparisonBySymbol:e=>{const t=`${e.config.depthPercentage}`,s=l[e.config.exchangeType]||[],n="buy"===e.config.orderSide;return e.symbols.map(r=>{const o=(0,a.dE)(r),i={};let c=0,l="";for(const a of s){const s=`${o}_${a}`,r=e.depthData[s],d=n?r?.depthStats?.[t]?.bidDepth||0:r?.depthStats?.[t]?.askDepth||0;i[a]=d,d>c&&(c=d,l=a)}return{symbol:o,displayName:`${o.replace("USDT","")}USDT`,exchanges:i,maxDepth:c,maxExchange:l}})},spreadComparisonBySymbol:e=>{const t=l[e.config.exchangeType]||[];return e.symbols.map(s=>{const n=(0,a.dE)(s),r={};let o=1/0,i="";for(const a of t){const t=`${n}_${a}`,s=e.depthData[t],c=s?.spreadPercent||0;r[a]=c,c>0&&c<o&&(o=c,i=a)}return{symbol:n,displayName:`${n.replace("USDT","")}USDT`,exchanges:r,minSpread:o===1/0?0:o,minExchange:i}})},isConnected:e=>"connected"===e.connectionStatus},actions:{initWebSocket(){this.wsService||(this.wsService=i(),this.wsService.onDepthUpdate=e=>this.handleDepthUpdate(e),this.wsService.onStatusChange=e=>{this.connectionStatus=e},this.wsService.onError=e=>{console.error("WebSocket 错误:",e)})},async connect(){this.initWebSocket(),this.isLoading=!0,this.wsService.updateWorkerConfig({depthLevels:this.config.depthLevels}),this.wsService.connect(),this.waitAndSubscribe()},waitAndSubscribe(){const e=()=>{"connected"===this.wsService.getStatus()?(this.subscribeAll(),this.isLoading=!1):"connecting"===this.wsService.getStatus()?setTimeout(e,100):this.isLoading=!1};setTimeout(e,100)},subscribeAll(){if(!this.wsService)return;const e=l[this.config.exchangeType]||[];for(const t of this.symbols)this.wsService.subscribeDepthBatch(e,t)},handleDepthUpdate(e){const{exchange:t,symbol:s,bids:n,asks:r,bestBid:o,bestAsk:i,spread:c,spreadPercent:l,depthStats:d,processedAt:h}=e,u=(0,a.dE)(s),p=`${u}_${t}`;this.depthData[p]={bids:n,asks:r,bestBid:o,bestAsk:i,spread:c,spreadPercent:l,depthStats:d,lastUpdate:new Date(h).toLocaleTimeString()}},switchExchangeType(e){if(this.config.exchangeType!==e){this.wsService&&this.wsService.unsubscribeAll(),this.depthData={},this.config.exchangeType=e;try{localStorage.setItem(d,e)}catch{}this.wsService&&"connected"===this.wsService.getStatus()&&this.subscribeAll()}},updateDepthPercentage(e){this.config.depthPercentage=e},updateOrderSide(e){this.config.orderSide=e},disconnect(){this.wsService&&this.wsService.disconnect(),this.depthData={},this.connectionStatus="disconnected"},async reconnect(){this.disconnect(),await new Promise(e=>setTimeout(e,500)),await this.connect()},updateSymbols(e){if(!Array.isArray(e)||0===e.length)return void console.warn("[DepthStore] 交易对列表为空，跳过更新");const t=JSON.stringify([...this.symbols].sort()),s=JSON.stringify([...e].sort());if(t===s)return;const n=[...this.symbols];if(this.symbols=e,this.wsService&&"connected"===this.wsService.getStatus()){const t=l[this.config.exchangeType]||[],s=n.filter(t=>!e.includes(t));for(const e of s)for(const s of t)this.wsService.unsubscribeDepth(s,e);const a=e.filter(e=>!n.includes(e));for(const e of a)this.wsService.subscribeDepthBatch(t,e)}},subscribeSymbol(e){if(e&&!this.symbols.includes(e)&&(this.symbols=[...this.symbols,e],this.wsService&&"connected"===this.wsService.getStatus())){const t=l[this.config.exchangeType]||[];this.wsService.subscribeDepthBatch(t,e)}}}})},1569:function(e,t,s){s.d(t,{j:function(){return p}});s(3842),s(6175),s(6068),s(1397);var n=s(2380),a=(s(6740),s(1928),s(7622),s(343),s(6699),s(3754),s(3383),s(7133),s(5284),s(5595),s(4096),s(7858),s(4715),s(7902),s(9857),s(5793));class r{constructor(){this.ws=null,this.status="disconnected",this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=3e3,this.reconnectTimer=null,this.subscriptions=new Set,this.tickerSubSymbols=new Map,this.onMessage=null,this.onStatusChange=null,this.onError=null,this.worker=null,this.workerReady=!1,this._initWorker()}_initWorker(){try{this.worker=new Worker(new URL(s.p+s.u(608),s.b)),this.worker.onmessage=e=>this._onWorkerMessage(e.data),this.worker.onerror=e=>{this.onError&&this.onError({type:"worker_error",error:e})}}catch(e){this.worker=null}}_onWorkerMessage(e){"ready"!==e.type?"wholeRealTime"===e.event&&e.row&&this.onMessage&&this.onMessage({event:"wholeRealTime",row:e.row}):this.workerReady=!0}_sendToWorker(e,t){this.worker&&this.workerReady?this.worker.postMessage({type:e,...t}):this.worker&&setTimeout(()=>this._sendToWorker(e,t),50)}connect(){if(!this.ws||this.ws.readyState!==WebSocket.OPEN){this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this._setStatus("connecting");try{this.ws=new WebSocket(a.Co),this.ws.onopen=()=>{this.reconnectAttempts=0,this._setStatus("connected"),this._resubscribeAll()},this.ws.onmessage=e=>this._handleMessage(e.data),this.ws.onclose=()=>{this._setStatus("disconnected"),this._scheduleReconnect()},this.ws.onerror=e=>{this.onError&&this.onError(e)}}catch(e){this._setStatus("error"),this.onError&&this.onError(e)}}}_setStatus(e){this.status=e,this.onStatusChange&&this.onStatusChange(e)}_handleMessage(e){try{const t="string"===typeof e?JSON.parse(e):e;if("tickers"===t.event)return void(this.onMessage&&this.onMessage(t))}catch(t){}if(this.worker&&this.workerReady)this._sendToWorker("message",{raw:e});else try{const t="string"===typeof e?JSON.parse(e):e;this.onMessage&&this.onMessage(t)}catch(t){}}_send(e){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(e))}_subKey(e){const{exchange:t,symbol:s,topic:n}=e;return s?`${t}|${s}|${n}`:`${t}|${n}`}_tickersSubKey(e,t){return`tickers|${e}|${t}`}subscribe(e){const{exchange:t,topic:s,symbol:n}=e,a=this._subKey({exchange:t,symbol:n,topic:s});if(this.subscriptions.has(a))return;this.subscriptions.add(a);const r=n?{event:"sub",exchange:t,symbol:n,topic:s}:{event:"sub",exchange:t,topic:s};this._send(r)}subscribeTickers(e){const{exchange:t,market_type:s="contract",symbols:n=[]}=e,a=this._tickersSubKey(t,s),r=Array.isArray(n)?n:[];this.subscriptions.add(a),this.tickerSubSymbols.set(a,r);const o={event:"sub",exchange:t,market_type:s,symbols:r};this._send(o)}updateTickerSymbols(e){const{exchange:t,market_type:s="contract",symbols:n=[]}=e,a=this._tickersSubKey(t,s),r=Array.isArray(n)?n:[],o=this.tickerSubSymbols.get(a)||[];this.tickerSubSymbols.set(a,r),this.ws&&this.ws.readyState===WebSocket.OPEN&&(this._send({event:"cancel",exchange:t,market_type:s,symbols:o}),this._send({event:"sub",exchange:t,market_type:s,symbols:r}))}unsubscribeTickers(e){const{exchange:t,market_type:s="contract"}=e,n=this._tickersSubKey(t,s);if(!this.subscriptions.has(n))return;this.subscriptions.delete(n);const a=this.tickerSubSymbols.get(n)||[];this.tickerSubSymbols.delete(n),this._send({event:"cancel",exchange:t,market_type:s,symbols:a})}unsubscribe(e){const{exchange:t,topic:s,symbol:n}=e,a=this._subKey({exchange:t,symbol:n,topic:s});if(!this.subscriptions.has(a))return;this.subscriptions.delete(a);const r=n?{event:"cancel",exchange:t,symbol:n,topic:s}:{event:"cancel",exchange:t,topic:s};this._send(r)}_resubscribeAll(){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.subscriptions.forEach(e=>{if(e.startsWith("tickers|")){const[,t,s]=e.split("|"),n=this.tickerSubSymbols.get(e)||[];this._send({event:"sub",exchange:t,market_type:s||"contract",symbols:n})}else{const t=e.split("|"),[s,n,a]=t;t.length>=3?this._send({event:"sub",exchange:s,symbol:n,topic:a}):this._send({event:"sub",exchange:s,topic:n})}})}_scheduleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts)return;this.reconnectAttempts++;const e=this.reconnectDelay*this.reconnectAttempts;this.reconnectTimer=setTimeout(()=>this.connect(),e)}disconnect(){this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.subscriptions.clear(),this.worker&&(this.worker.terminate(),this.worker=null,this.workerReady=!1),this.ws&&(this.ws.onclose=null,this.ws.close(),this.ws=null),this._setStatus("disconnected")}getStatus(){return this.status}}let o=null;function i(){return o||(o=new r),o}function c(e){return e&&"string"===typeof e?e.replace(/_/g,"-"):e}function l(e,t){if(!t||"object"!==typeof t)return null;const s=t.info||{},n=(s.s||t.symbol?.replace("/","")||e?.replace("/","")||"").toUpperCase();if(!n)return null;const a=s.c??t.close??t.last,r=s.o??t.open,o=s.h??t.high,i=s.l??t.low,c=s.v??t.baseVolume,l=s.qv??t.quoteVolume,d=t.change??s.change,h=null!=s.m?Number(s.m):null!=t.percentage?t.percentage/100:0;return{t:t.timestamp??s.t??Date.now(),a:t.bid??null,b:t.ask??null,s:n,c:null!=a?String(a):"",o:null!=r?String(r):"",h:null!=o?String(o):"",l:null!=i?String(i):"",v:null!=c?String(c):"0",qv:null!=l?String(l):"0",pc:null!=d?String(d):"0",pcp:h,op:s.op??""}}let d=null,h=null;const u=150,p=(0,n.nY)("market",{state:()=>({exchange:"toobit",marketType:"contract",tickers:[],error:null,wsStatus:"disconnected"}),getters:{tickerList:e=>e.tickers,tickerBySymbol:e=>t=>{const s=c(t);return e.tickers.find(e=>c(e.s)===s||e.s===t)||null}},actions:{startTickers(e=this.exchange,t=this.marketType,s=[]){this.error=null,this.exchange=e,this.marketType=t,this.initWs(e,s)},setInitialTickersFrom24hr(e=[]){Array.isArray(e)&&0!==e.length&&(this.tickers=e.map(e=>({t:e.t,a:e.a,b:e.b,s:(e.s||"").toUpperCase(),c:null!=e.c?String(e.c):"",o:null!=e.o?String(e.o):"",h:null!=e.h?String(e.h):"",l:null!=e.l?String(e.l):"",v:null!=e.v?String(e.v):"0",qv:null!=e.qv?String(e.qv):"0",pc:null!=e.pc?String(e.pc):"0",pcp:null!=e.pcp?Number(e.pcp):0,op:e.op??""})))},updateTickerSymbols(e=[]){const t=i(),s=this.exchange?`${this.exchange}`:this.exchange,n="spot"===this.marketType?"spot":"contract";this._wsTickersInitialized&&t.updateTickerSymbols({exchange:s,market_type:n,symbols:e})},initWs(e=this.exchange,t=[]){const s=i(),n="spot"===this.marketType?"spot":"contract",a=Array.isArray(t)?t:[];this._wsTickersInitialized&&this._wsTickersInitialized!==n&&(s.unsubscribeTickers({exchange:this.exchange,market_type:this._wsTickersInitialized}),this._wsTickersInitialized=null),"connected"!==s.getStatus()||this._wsTickersInitialized!==n?(this._wsTickersInitialized=n,s.onMessage=e=>{if("tickers"!==e.event||!e.data||"object"!==typeof e.data)return;const t=d??[...this.tickers];let s=!1;for(const[n,a]of Object.entries(e.data)){const e=l(n,a);if(!e)continue;const r=c(e.s),o=t.findIndex(t=>c(t.s)===r||t.s===e.s);o>=0?(t[o]={...t[o],...e},s=!0):(t.push(e),s=!0)}if(s&&(d=t,!h)){const e=this;h=setTimeout(()=>{e.tickers=d,d=null,h=null},u)}},s.onStatusChange=e=>{this.wsStatus=e},s.connect(),this.wsStatus=s.getStatus(),s.subscribeTickers({exchange:e||this.exchange,market_type:n,symbols:a})):s.updateTickerSymbols({exchange:this.exchange,market_type:n,symbols:a})},stopWs(){h&&(clearTimeout(h),h=null),d=null;const e=i(),t=this.exchange?`${this.exchange}`:this.exchange,s="spot"===this.marketType?"spot":"contract";e.unsubscribeTickers({exchange:t,market_type:s}),e.onMessage=null,e.onStatusChange=null,this._wsTickersInitialized=null,this.wsStatus="disconnected"}}})},6329:function(e,t,s){s.d(t,{V:function(){return r}});s(6175),s(9865),s(6068),s(1397);var n=s(2380),a=s(3291);const r=(0,n.nY)("symbol",{state:()=>({symbolsByExchangeAndType:{},currentExchange:"toobit",currentType:"contract",loading:!1,error:null}),getters:{currentSymbols:e=>{const t=`${e.currentExchange}_${e.currentType}`;return e.symbolsByExchangeAndType[t]||[]},symbolList:e=>{const t=`${e.currentExchange}_${e.currentType}`,s=e.symbolsByExchangeAndType[t]||[];return s.map(e=>e.symbol)},getSymbolInfo:e=>t=>{const s=`${e.currentExchange}_${e.currentType}`,n=e.symbolsByExchangeAndType[s]||[];return n.find(e=>e.symbol===t)||null},getSymbolsByExchangeAndType:e=>(t,s)=>{const n=`${t}_${s}`;return e.symbolsByExchangeAndType[n]||[]}},actions:{async fetchSymbols(e={}){const{exchange:t=this.currentExchange,type:s=this.currentType,forceRefresh:n=!1}=e,r=`${t}_${s}`;if(!n&&this.symbolsByExchangeAndType[r]?.length>0)return this.symbolsByExchangeAndType[r];this.loading=!0,this.error=null;try{const e=await(0,a.O)({exchange:t,type:s}),n=e.filter(e=>"TRADING"===e.status);return this.symbolsByExchangeAndType[r]=n,n}catch(o){throw this.error=o.message||"获取交易对列表失败",console.error("[SymbolStore] 获取交易对列表失败:",o),o}finally{this.loading=!1}},setCurrentExchange(e){this.currentExchange=e},setCurrentType(e){this.currentType=e},async init(){await this.fetchSymbols({exchange:this.currentExchange,type:this.currentType})}}})}},t={};function s(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,n,a,r){if(!n){var o=1/0;for(d=0;d<e.length;d++){n=e[d][0],a=e[d][1],r=e[d][2];for(var i=!0,c=0;c<n.length;c++)(!1&r||o>=r)&&Object.keys(s.O).every(function(e){return s.O[e](n[c])})?n.splice(c--,1):(i=!1,r<o&&(o=r));if(i){e.splice(d--,1);var l=a();void 0!==l&&(t=l)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,a,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce(function(t,n){return s.f[n](e,t),t},[]))}}(),function(){s.u=function(e){return"static/js/"+e+"."+{48:"94b58e6b",180:"6d6aee1b",209:"b164aaa8",522:"e167941f",608:"c7e3ce15",675:"7a2963aa",791:"db954919",896:"a54997c4",909:"0b2f3e9f",956:"c1766463",977:"1d858504",987:"5a9069f4"}[e]+".js"}}(),function(){s.miniCssF=function(e){return"static/css/"+e+"."+{48:"8d119176",180:"23de0b06",522:"43555809",675:"1dcb2c0b",791:"b3f8d72c",896:"8c7614d0",909:"be4c3b0a",977:"7fd440d5",987:"d4488d82"}[e]+".css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="web-stonelink:";s.l=function(n,a,r,o){if(e[n])e[n].push(a);else{var i,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var h=l[d];if(h.getAttribute("src")==n||h.getAttribute("data-webpack")==t+r){i=h;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",s.nc&&i.setAttribute("nonce",s.nc),i.setAttribute("data-webpack",t+r),i.src=n),e[n]=[a];var u=function(t,s){i.onerror=i.onload=null,clearTimeout(p);var a=e[n];if(delete e[n],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach(function(e){return e(s)}),t)return t(s)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=u.bind(null,i.onerror),i.onload=u.bind(null,i.onload),c&&document.head.appendChild(i)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/web-stonelink/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,n,a,r){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",s.nc&&(o.nonce=s.nc);var i=function(s){if(o.onerror=o.onload=null,"load"===s.type)a();else{var n=s&&s.type,i=s&&s.target&&s.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+n+": "+i+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=n,c.request=i,o.parentNode&&o.parentNode.removeChild(o),r(c)}};return o.onerror=o.onload=i,o.href=t,n?n.parentNode.insertBefore(o,n.nextSibling):document.head.appendChild(o),o},t=function(e,t){for(var s=document.getElementsByTagName("link"),n=0;n<s.length;n++){var a=s[n],r=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(r===e||r===t))return a}var o=document.getElementsByTagName("style");for(n=0;n<o.length;n++){a=o[n],r=a.getAttribute("data-href");if(r===e||r===t)return a}},n=function(n){return new Promise(function(a,r){var o=s.miniCssF(n),i=s.p+o;if(t(o,i))return a();e(n,i,null,a,r)})},a={524:0};s.f.miniCss=function(e,t){var s={48:1,180:1,522:1,675:1,791:1,896:1,909:1,977:1,987:1};a[e]?t.push(a[e]):0!==a[e]&&s[e]&&t.push(a[e]=n(e).then(function(){a[e]=0},function(t){throw delete a[e],t}))}}}(),function(){s.b="undefined"!==typeof document&&document.baseURI||self.location.href;var e={524:0};s.f.j=function(t,n){var a=s.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var r=new Promise(function(s,n){a=e[t]=[s,n]});n.push(a[2]=r);var o=s.p+s.u(t),i=new Error,c=function(n){if(s.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var r=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",i.name="ChunkLoadError",i.type=r,i.request=o,a[1](i)}};s.l(o,c,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,r,o=n[0],i=n[1],c=n[2],l=0;if(o.some(function(t){return 0!==e[t]})){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(c)var d=c(s)}for(t&&t(n);l<o.length;l++)r=o[l],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(d)},n=self["webpackChunkweb_stonelink"]=self["webpackChunkweb_stonelink"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[504],function(){return s(7420)});n=s.O(n)})();