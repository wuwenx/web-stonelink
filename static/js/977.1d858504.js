"use strict";(self["webpackChunkweb_stonelink"]=self["webpackChunkweb_stonelink"]||[]).push([[977],{8977:function(e,t,n){n.r(t),n.d(t,{default:function(){return F}});n(6175),n(1397),n(7547),n(343),n(6699),n(3754),n(3383),n(7133),n(5284),n(5595),n(4096),n(7858);var a=n(587),l=n(8674),s=n(2651),r=n(5793),o=n(3470);const u=["binance_usdm","toobit"];function c(e={}){const t=e.exchange??u.join(","),n=`${r.JR}/funding-rates`;return(0,o.A)({url:n,method:"get",params:{exchange:t,symbol:e.symbol||void 0},timeout:3e4}).then(e=>{const t=e.data;if(200!==t.code)throw new Error(t.message||"获取资金费率失败");return t.data||{}}).catch(e=>{if(e.response)throw new Error(e.response.data?.message||"获取资金费率失败");if(e.request)throw new Error("网络错误，请检查后端服务是否启动");throw e})}var i=n(6329);const d={class:"funding-page"},f={class:"card-header"},v={class:"header-left"},b={class:"card-header table-card-header"},g={class:"table-wrap"},p={class:"funding-table"},h={class:"data-row"},k={class:"col-coin"},m={class:"coin-label"},y={key:0,class:"predicted-row"},C={key:0,class:"empty-tip"},_={key:1,class:"load-more-wrap"},E={class:"count-tip"},w="toobit",L=50;var X={__name:"FundingRates",setup(e){const t=(0,i.V)(),n={binance_usdm:"Binance",toobit:"Toobit",okx:"OKX",bybit:"Bybit",gateio:"Gate",bitget:"Bitget"},r=(0,s.KR)(!1),o=(0,s.KR)({}),X=(0,a.EW)(()=>u.map(e=>({id:e,name:n[e]||e})));function S(e){return!(!e||"string"!==typeof e)&&/^[^/]+\/USDT:USDT$/i.test(e.trim())}function x(e){if(!e||"string"!==typeof e)return"";const t=e.trim().toUpperCase();if(!t)return"";if(t.includes("-SWAP-"))return t.split("-SWAP-")[0].trim()||"";const n=t.split(":")[0].trim();if(!n)return"";const a=n.indexOf("/");if(a>0)return n.slice(0,a).trim();const l=["USDT","USDC","BUSD","USD","TUSD"];for(const s of l)if(n.endsWith(s)&&n.length>s.length)return n.slice(0,-s.length).trim();return n}function F(e){const t=["BTC","ETH","SOL","BNB","XRP","DOGE","ADA","AVAX","LINK","MATIC"];return[...e].sort((e,n)=>{const a=t.indexOf(e),l=t.indexOf(n);return-1!==a&&-1!==l?a-l:-1!==a?-1:-1!==l?1:e.localeCompare(n)})}const A=(0,a.EW)(()=>{const e={};for(const t of u){e[t]=new Map;const n=o.value[t]||[];for(const a of n){if(!S(a.symbol))continue;const n=x(a.symbol);n&&e[t].set(n,a)}}return e}),K=(0,a.EW)(()=>{const e=t.getSymbolsByExchangeAndType(w,"contract")||[],n=new Set;for(const t of e){const e=t.symbol||t.id||t.base,a=e?x(e):(t.base||"").toString().toUpperCase();a&&n.add(a)}if(n.size>0)return F([...n]);for(const t of u){const e=o.value[t]||[];for(const t of e){if(!S(t.symbol))continue;const e=x(t.symbol);e&&n.add(e)}}return F([...n])}),W=(0,s.KR)(L),D=(0,a.EW)(()=>K.value.slice(0,W.value));function T(){W.value=Math.min(W.value+L,K.value.length)}function U(e,t){const n=A.value[t];if(!n)return null;const a=n.get(e);return null!=a?.funding_rate?a.funding_rate:null}function B(e,t){const n=A.value[t];if(!n)return null;const a=n.get(e);return null!=a?.next_funding_rate?a.next_funding_rate:null}function N(e){return X.value.some(t=>null!=B(e,t.id))}function I(e){if(null==e||""===e)return"--";const t=Number(e);if(Number.isNaN(t))return"--";const n=100*t;return n.toFixed(6)+"%"}function O(e){if(null==e)return"rate-cell";const t=Number(e);return t>0?"rate-cell up":t<0?"rate-cell down":"rate-cell"}async function R(){r.value=!0;try{const e=await c({exchange:u.join(",")});o.value=e||{},W.value=L}catch(e){o.value={}}finally{r.value=!1}}return(0,a.sV)(()=>{R()}),(e,t)=>{const n=(0,a.g2)("el-tag"),s=(0,a.g2)("el-card"),o=(0,a.g2)("el-button"),u=(0,a.gN)("loading");return(0,a.uX)(),(0,a.CE)("div",d,[(0,a.bF)(s,{class:"header-card",shadow:"hover"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",f,[(0,a.Lk)("div",v,[t[1]||(t[1]=(0,a.Lk)("h1",{class:"page-title"}," 资金费率 ",-1)),(0,a.bF)(n,{type:"info",size:"small"},{default:(0,a.k6)(()=>[...t[0]||(t[0]=[(0,a.eW)(" 合约 ",-1)])]),_:1})])])]),_:1}),(0,a.bF)(s,{class:"table-card",shadow:"hover"},{header:(0,a.k6)(()=>[(0,a.Lk)("div",b,[t[3]||(t[3]=(0,a.Lk)("span",{class:"card-title"},"多交易所资金费率",-1)),(0,a.bF)(o,{type:"primary",size:"small",loading:r.value,onClick:R},{default:(0,a.k6)(()=>[...t[2]||(t[2]=[(0,a.eW)(" 刷新 ",-1)])]),_:1},8,["loading"])])]),default:(0,a.k6)(()=>[(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",g,[(0,a.Lk)("table",p,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[t[4]||(t[4]=(0,a.Lk)("th",{class:"col-coin"}," 币种 ",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(X.value,e=>((0,a.uX)(),(0,a.CE)("th",{key:e.id,class:"col-exchange"},(0,l.v_)(e.name),1))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(D.value,e=>((0,a.uX)(),(0,a.CE)(a.FK,{key:e},[(0,a.Lk)("tr",h,[(0,a.Lk)("td",k,[(0,a.Lk)("span",m,(0,l.v_)(e),1)]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(X.value,t=>((0,a.uX)(),(0,a.CE)("td",{key:t.id,class:"col-rate"},[(0,a.Lk)("span",{class:(0,l.C4)(O(U(e,t.id)))},(0,l.v_)(I(U(e,t.id))),3)]))),128))]),N(e)?((0,a.uX)(),(0,a.CE)("tr",y,[t[5]||(t[5]=(0,a.Lk)("td",{class:"col-coin sub-label"}," 预测费率 ",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(X.value,t=>((0,a.uX)(),(0,a.CE)("td",{key:t.id,class:"col-rate"},[(0,a.Lk)("span",{class:(0,l.C4)(O(B(e,t.id)))},(0,l.v_)(I(B(e,t.id))),3)]))),128))])):(0,a.Q3)("",!0)],64))),128))])]),r.value||0!==K.value.length?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",C," 暂无数据 ")),!r.value&&K.value.length>0&&W.value<K.value.length?((0,a.uX)(),(0,a.CE)("div",_,[(0,a.Lk)("span",E,"已展示 "+(0,l.v_)(W.value)+" / "+(0,l.v_)(K.value.length)+" 条",1),(0,a.bF)(o,{type:"primary",size:"large",class:"load-more-btn",onClick:T},{default:(0,a.k6)(()=>[...t[6]||(t[6]=[(0,a.eW)(" 加载更多 ",-1)])]),_:1})])):(0,a.Q3)("",!0)])),[[u,r.value]])]),_:1})])}}},S=n(9190);const x=(0,S.A)(X,[["__scopeId","data-v-7fb115d8"]]);var F=x}}]);