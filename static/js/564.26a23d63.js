"use strict";(self["webpackChunkweb_stonelink"]=self["webpackChunkweb_stonelink"]||[]).push([[564],{5564:function(e,a,t){t.r(a),t.d(a,{default:function(){return L}});t(600),t(6517),t(1274),t(1859),t(9543),t(8485);var l=t(1140),s=t(3853),o=t(2780),n=t(1903),c=t(4446);const r={class:"depth-container"},d={class:"card-header"},i={class:"header-right"},u={class:"card-header"},b={class:"header-right"},p={class:"depth-selector"},k={class:"status-item"},v={class:"status-icon"},g={class:"status-content"},f={class:"status-item"},_={class:"status-icon"},y={class:"status-content"};var h={__name:"Depth",setup(e){const a=(0,c.Jd)(),t=(0,c.AM)(),h=(0,n.rd)(),m=(0,o.KR)(a.config.exchangeType||"futures"),F=(0,o.KR)(1e-4),L=(0,o.KR)("buy"),C=[{label:"万1(0.01%)",value:1e-4},{label:"万5(0.05%)",value:5e-4},{label:"微观(0.1%)",value:.001},{label:"紧密(0.5%)",value:.005},{label:"核心(1%)",value:.01},{label:"巨额(2%)",value:.02},{label:"大额(5%)",value:.05},{label:"极限(10%)",value:.1}],S=["BTCUSDT","ETHUSDT"],w=(0,l.EW)(()=>S.map(e=>{const l=a.getDepthDataBySymbol(e),s=t.getDepthDataBySymbol(e);let o=0,n=0;l&&l.bestBid&&l.bestAsk&&(o="buy"===L.value?x(l.bids,l.bestBid,F.value):z(l.asks,l.bestAsk,F.value)),s&&s.bestBid&&s.bestAsk&&(n="buy"===L.value?x(s.bids,s.bestBid,F.value):z(s.asks,s.bestAsk,F.value));let c=0;return n>o?c=1:n<o&&(c=-1),{symbol:e,binanceValue:o,toobitValue:n,score:c}})),W=(0,l.EW)(()=>w.value),V=(0,l.EW)(()=>S.map(e=>{const l=a.getDepthDataBySymbol(e),s=t.getDepthDataBySymbol(e);let o=0,n=0,c=0,r=0;l&&l.bestBid&&l.bestAsk&&(o=l.bestAsk-l.bestBid,n=o/l.bestBid*100),s&&s.bestBid&&s.bestAsk&&(c=s.bestAsk-s.bestBid,r=c/s.bestBid*100);let d=0;return r>n?d=1:r<n&&(d=-1),{symbol:e,binanceSpread:o,binanceSpreadPercent:n,toobitSpread:c,toobitSpreadPercent:r,score:d}})),x=(e,a,t)=>{if(!e||0===e.length||!a)return 0;const l=a*(1-t);return e.filter(e=>e.price>=l).reduce((e,a)=>e+a.quantity,0)},z=(e,a,t)=>{if(!e||0===e.length||!a)return 0;const l=a*(1+t);return e.filter(e=>e.price<=l).reduce((e,a)=>e+a.quantity,0)},B=e=>{h.push(`/symbol/${e}`)},T=e=>{m.value=e,a.updateConfig({exchangeType:e}),t.updateConfig({exchangeType:e})},A=e=>{F.value=e},D=e=>{L.value=e},I=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toFixed(1),E=(e,a)=>e>a?"success":e<a?"danger":"warning",U=e=>e>0?"success":e<0?"danger":"info",P=e=>e&&0!==e?`${e.toFixed(4)} %`:"0.0000 %",K=e=>e<.05?"success":e<.1?"warning":"danger",N=e=>{if("binance"===e){const e=S.map(e=>a.getConnectionStatus(e));return e.every(e=>"connected"===e)?"connected":e.some(e=>"connecting"===e)?"connecting":e.some(e=>"error"===e)?"error":"disconnected"}if("toobit"===e){const e=S.map(e=>t.getConnectionStatus(e));return e.every(e=>"connected"===e)?"connected":e.some(e=>"connecting"===e)?"connecting":e.some(e=>"error"===e)?"error":"disconnected"}return"disconnected"},O=e=>{const a=N(e),t={connected:"已连接",connecting:"连接中",disconnected:"未连接",error:"连接错误"};return t[a]||"未知"},X=e=>{const a=N(e),t={connected:"#67c23a",connecting:"#e6a23c",disconnected:"#909399",error:"#f56c6c"};return t[a]||"#909399"},$=e=>{const a=N(e),t={connected:{color:"#67c23a",fontSize:"14px"},connecting:{color:"#e6a23c",fontSize:"14px"},disconnected:{color:"#909399",fontSize:"14px"},error:{color:"#f56c6c",fontSize:"14px"}};return t[a]||{color:"#909399",fontSize:"14px"}},R=e=>{const a=N(e),t={connected:"CircleCheck",connecting:"Loading",disconnected:"CircleClose",error:"Warning"};return t[a]||"CircleClose"},q=({row:e,column:a,rowIndex:t,columnIndex:l})=>({textAlign:"center"}),M=({row:e,column:a,rowIndex:t,columnIndex:l})=>({textAlign:"center",fontWeight:"bold"});return(0,l.sV)(()=>{console.log("Depth页面已挂载，WebSocket连接由SimpleLayout管理"),m.value=a.config.exchangeType||"futures"}),(0,l.hi)(()=>{console.log("Depth页面已卸载，保持WebSocket连接")}),(e,a)=>{const t=(0,l.g2)("el-tag"),o=(0,l.g2)("el-card"),n=(0,l.g2)("el-radio-button"),c=(0,l.g2)("el-radio-group"),h=(0,l.g2)("el-col"),S=(0,l.g2)("el-row"),w=(0,l.g2)("el-button"),x=(0,l.g2)("el-table-column"),z=(0,l.g2)("el-table"),N=(0,l.g2)("el-icon");return(0,l.uX)(),(0,l.CE)("div",r,[(0,l.bF)(o,{class:"header-card",shadow:"hover"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",d,[a[4]||(a[4]=(0,l.Lk)("div",{class:"header-left"},[(0,l.Lk)("h1",{class:"page-title"}," 深度对比 ")],-1)),(0,l.Lk)("div",i,[(0,l.bF)(t,{type:"info",size:"small"},{default:(0,l.k6)(()=>[...a[3]||(a[3]=[(0,l.eW)(" 实时数据 ",-1)])]),_:1})])])]),_:1}),(0,l.bF)(o,{class:"control-card",shadow:"hover"},{header:(0,l.k6)(()=>[...a[5]||(a[5]=[(0,l.Lk)("div",{class:"card-header"},[(0,l.Lk)("span",{class:"card-title"},"控制面板")],-1)])]),default:(0,l.k6)(()=>[(0,l.bF)(S,{gutter:20},{default:(0,l.k6)(()=>[(0,l.bF)(h,{span:4},{default:(0,l.k6)(()=>[(0,l.bF)(c,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),size:"large",onChange:T},{default:(0,l.k6)(()=>[(0,l.bF)(n,{label:"futures"},{default:(0,l.k6)(()=>[...a[6]||(a[6]=[(0,l.eW)(" 合约 ",-1)])]),_:1}),(0,l.bF)(n,{label:"spot"},{default:(0,l.k6)(()=>[...a[7]||(a[7]=[(0,l.eW)(" 现货 ",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,l.bF)(h,{span:6},{default:(0,l.k6)(()=>[(0,l.bF)(c,{modelValue:L.value,"onUpdate:modelValue":a[1]||(a[1]=e=>L.value=e),size:"large",onChange:D},{default:(0,l.k6)(()=>[(0,l.bF)(n,{label:"buy"},{default:(0,l.k6)(()=>[...a[8]||(a[8]=[(0,l.eW)(" 买盘 ",-1)])]),_:1}),(0,l.bF)(n,{label:"sell"},{default:(0,l.k6)(()=>[...a[9]||(a[9]=[(0,l.eW)(" 卖盘 ",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,l.bF)(o,{class:"table-card",shadow:"hover"},{header:(0,l.k6)(()=>[(0,l.Lk)("div",u,[a[11]||(a[11]=(0,l.Lk)("div",{class:"header-left"},[(0,l.Lk)("span",{class:"card-title"},"深度对比数据")],-1)),(0,l.Lk)("div",b,[(0,l.Lk)("div",p,[a[10]||(a[10]=(0,l.Lk)("label",{class:"depth-label"},"深度范围:",-1)),(0,l.bF)(c,{modelValue:F.value,"onUpdate:modelValue":a[2]||(a[2]=e=>F.value=e),size:"small",onChange:A},{default:(0,l.k6)(()=>[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(C,e=>(0,l.bF)(n,{key:e.value,label:e.value},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.label),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])])])])]),default:(0,l.k6)(()=>[(0,l.bF)(z,{data:W.value,class:"comparison-table","cell-style":q,"header-cell-style":M},{default:(0,l.k6)(()=>[(0,l.bF)(x,{prop:"symbol",label:"资产",align:"center"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(w,{type:"primary",size:"small",onClick:a=>B(e.symbol)},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.symbol)+" "+(0,s.v_)(m.value.toUpperCase()),1)]),_:2},1032,["onClick"])]),_:1}),(0,l.bF)(x,{prop:"binanceValue",label:"BINANCE",align:"center"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(t,{type:E(e.binanceValue,e.toobitValue),size:"large"},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(I(e.binanceValue)),1)]),_:2},1032,["type"])]),_:1}),(0,l.bF)(x,{prop:"toobitValue",label:"TOOBIT",align:"center"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(t,{type:E(e.toobitValue,e.binanceValue),size:"large"},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(I(e.toobitValue)),1)]),_:2},1032,["type"])]),_:1}),(0,l.bF)(x,{prop:"score",label:"分数",align:"center"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(t,{type:U(e.score),size:"large"},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.score>0?"+":"")+(0,s.v_)(e.score),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])]),_:1}),(0,l.bF)(o,{class:"spread-card",shadow:"hover"},{header:(0,l.k6)(()=>[...a[12]||(a[12]=[(0,l.Lk)("div",{class:"card-header"},[(0,l.Lk)("span",{class:"card-title"},"价差详情对比")],-1)])]),default:(0,l.k6)(()=>[(0,l.bF)(z,{data:V.value,class:"spread-table","cell-style":q,"header-cell-style":M},{default:(0,l.k6)(()=>[(0,l.bF)(x,{prop:"symbol",label:"资产",align:"center"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(w,{type:"primary",size:"small",onClick:a=>B(e.symbol)},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.symbol)+" "+(0,s.v_)(m.value.toUpperCase()),1)]),_:2},1032,["onClick"])]),_:1}),(0,l.bF)(x,{prop:"binanceSpread",label:"BINANCE",align:"center"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(t,{type:K(e.binanceSpreadPercent),size:"large"},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(P(e.binanceSpreadPercent)),1)]),_:2},1032,["type"])]),_:1}),(0,l.bF)(x,{prop:"toobitSpread",label:"TOOBIT",align:"center"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(t,{type:K(e.toobitSpreadPercent),size:"large"},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(P(e.toobitSpreadPercent)),1)]),_:2},1032,["type"])]),_:1}),(0,l.bF)(x,{prop:"score",label:"分数 ↑",align:"center"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(t,{type:U(e.score),size:"large"},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e.score>0?"+":"")+(0,s.v_)(e.score),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])]),_:1}),(0,l.bF)(o,{class:"status-card",shadow:"hover"},{header:(0,l.k6)(()=>[...a[13]||(a[13]=[(0,l.Lk)("div",{class:"card-header"},[(0,l.Lk)("span",{class:"card-title"},"连接状态")],-1)])]),default:(0,l.k6)(()=>[(0,l.bF)(S,{gutter:20},{default:(0,l.k6)(()=>[(0,l.bF)(h,{span:12},{default:(0,l.k6)(()=>[(0,l.Lk)("div",k,[(0,l.Lk)("div",v,[(0,l.bF)(N,{color:X("binance"),size:"20"},{default:(0,l.k6)(()=>[((0,l.uX)(),(0,l.Wv)((0,l.$y)(R("binance"))))]),_:1},8,["color"])]),(0,l.Lk)("div",g,[a[14]||(a[14]=(0,l.Lk)("div",{class:"status-title"}," 币安 ",-1)),(0,l.Lk)("div",{class:"status-value",style:(0,s.Tr)($("binance"))},(0,s.v_)(O("binance")),5)])])]),_:1}),(0,l.bF)(h,{span:12},{default:(0,l.k6)(()=>[(0,l.Lk)("div",f,[(0,l.Lk)("div",_,[(0,l.bF)(N,{color:X("toobit"),size:"20"},{default:(0,l.k6)(()=>[((0,l.uX)(),(0,l.Wv)((0,l.$y)(R("toobit"))))]),_:1},8,["color"])]),(0,l.Lk)("div",y,[a[15]||(a[15]=(0,l.Lk)("div",{class:"status-title"}," Toobit ",-1)),(0,l.Lk)("div",{class:"status-value",style:(0,s.Tr)($("toobit"))},(0,s.v_)(O("toobit")),5)])])]),_:1})]),_:1})]),_:1})])}}},m=t(8680);const F=(0,m.A)(h,[["__scopeId","data-v-13398c18"]]);var L=F}}]);