"use strict";(self["webpackChunkweb_stonelink"]=self["webpackChunkweb_stonelink"]||[]).push([[180],{9478:function(e,a,t){t.d(a,{B:function(){return l},a:function(){return r}});var s=t(5793),n=t(3470);function r(e={}){const{page:a=1,page_size:t=20,lang:r="zh"}=e,l=`${s.JR}/news`;return(0,n.A)({url:l,method:"get",params:{page:a,page_size:t,lang:r},timeout:15e3}).then(e=>{const a=e.data;if(200!==a.code)throw new Error(a.message||"获取快讯失败");const t=a.data||{};return{items:t.items||[],total:t.total??0,page:t.page??1,page_size:t.page_size??20}}).catch(e=>{if(e.response)throw new Error(e.response.data?.message||"获取快讯失败");if(e.request)throw new Error("网络错误，请检查后端服务是否启动");throw e})}function l(e,a={}){const{lang:t="zh"}=a,r=`${s.JR}/news/${e}`;return(0,n.A)({url:r,method:"get",params:{lang:t},timeout:15e3}).then(e=>{const a=e.data;if(200!==a.code)throw new Error(a.message||"获取快讯详情失败");return a.data||{}}).catch(e=>{if(e.response)throw new Error(e.response.data?.message||"获取快讯详情失败");if(e.request)throw new Error("网络错误，请检查后端服务是否启动");throw e})}},1180:function(e,a,t){t.r(a),t.d(a,{default:function(){return b}});t(3842);var s=t(587),n=t(8674),r=t(2651),l=t(9844),u=t(9931),o=t(9478);const i={class:"news-page"},c={class:"news-list"},d=["onClick"],v={class:"news-item-header"},g={class:"news-source"},p={class:"news-time"},h={class:"news-title"},w={key:0,class:"news-summary"},m={class:"load-more-wrap"},k={key:1,class:"no-more"},f={key:1,class:"empty"},_={name:"News"};var y=Object.assign(_,{setup(e){const a=(0,u.rd)(),t=20,_=(0,r.KR)([]),y=(0,r.KR)(0),E=(0,r.KR)(1),C=(0,r.KR)(!1),b=(0,r.KR)(!1),X=(0,s.EW)(()=>_.value.length<y.value);function L(e){if(!e)return"--";try{const a=new Date(e);if(Number.isNaN(a.getTime()))return e;const t=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),r=String(a.getHours()).padStart(2,"0"),l=String(a.getMinutes()).padStart(2,"0");return`${t}-${s}-${n} ${r}:${l}`}catch{return e}}async function R(e=!1){e?b.value=!0:(C.value=!0,E.value=1,_.value=[]);try{const a=await(0,o.a)({page:E.value,page_size:t,lang:"zh"});_.value=e?_.value.concat(a.items||[]):a.items||[],y.value=a.total??0,E.value=a.page??E.value}catch(a){e||(_.value=[])}finally{C.value=!1,b.value=!1}}function z(){X.value&&!b.value&&(E.value+=1,R(!0))}function S(e){a.push({name:"NewsDetail",params:{id:e}})}return(0,s.sV)(()=>{R()}),(e,a)=>{const t=(0,s.g2)("el-card"),u=(0,s.g2)("el-icon"),o=(0,s.gN)("loading");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.bF)(t,{class:"header-card",shadow:"hover"},{default:(0,s.k6)(()=>[...a[0]||(a[0]=[(0,s.Lk)("div",{class:"card-header"},[(0,s.Lk)("h1",{class:"page-title"}," 快讯 ")],-1)])]),_:1}),(0,s.bF)(t,{class:"list-card",shadow:"hover"},{default:(0,s.k6)(()=>[(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",c,[_.value.length?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(_.value,e=>((0,s.uX)(),(0,s.CE)("article",{key:e.id,class:"news-item",onClick:a=>S(e.id)},[(0,s.Lk)("div",v,[(0,s.Lk)("span",g,(0,n.v_)(e.source_name||"快讯"),1),(0,s.Lk)("span",p,(0,n.v_)(L(e.published_at||e.created_at)),1)]),(0,s.Lk)("h3",h,(0,n.v_)(e.title),1),e.summary?((0,s.uX)(),(0,s.CE)("p",w,(0,n.v_)(e.summary),1)):(0,s.Q3)("",!0)],8,d))),128)),(0,s.Lk)("div",m,[X.value?((0,s.uX)(),(0,s.CE)("span",{key:0,class:(0,n.C4)(["load-more-link",{"is-loading":b.value}]),onClick:z},[b.value?((0,s.uX)(),(0,s.Wv)(u,{key:0,class:"is-loading"},{default:(0,s.k6)(()=>[(0,s.bF)((0,r.R1)(l.Loading))]),_:1})):((0,s.uX)(),(0,s.Wv)(u,{key:1},{default:(0,s.k6)(()=>[(0,s.bF)((0,r.R1)(l.ArrowDown))]),_:1})),(0,s.Lk)("span",null,(0,n.v_)(b.value?"加载中...":"加载更多"),1)],2)):_.value.length>0?((0,s.uX)(),(0,s.CE)("p",k," 没有更多了 ")):(0,s.Q3)("",!0)])],64)):C.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",f," 暂无快讯 "))])),[[o,C.value]])]),_:1})])}}}),E=t(9190);const C=(0,E.A)(y,[["__scopeId","data-v-ad21eb7c"]]);var b=C}}]);